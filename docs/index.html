<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Microsoft SharePoint on the AWS Cloud</title>
<style>


/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */

/* Uncomment @import statement to use as custom stylesheet */

@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/

article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}

audio,video{display:inline-block}

audio:not([controls]){display:none;height:0}

html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}

a{background:none}

a:focus{outline:thin dotted}

a:active,a:hover{outline:0}

h1{font-size:2em;margin:.67em 0}

abbr[title]{border-bottom:1px dotted}

b,strong{font-weight:bold}

dfn{font-style:italic}

hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}

mark{background:#ff0;color:#000}

code,kbd,pre,samp{font-family:monospace;font-size:1em}

pre{white-space:pre-wrap}

q{quotes:"\201C" "\201D" "\2018" "\2019"}

small{font-size:80%}

sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}

sup{top:-.5em}

sub{bottom:-.25em}

img{border:0}

svg:not(:root){overflow:hidden}

figure{margin:0}

fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}

legend{border:0;padding:0}

button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}

button,input{line-height:normal}

button,select{text-transform:none}

button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}

button[disabled],html input[disabled]{cursor:default}

input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}

button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}

textarea{overflow:auto;vertical-align:top}

table{border-collapse:collapse;border-spacing:0}

*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}

html,body{font-size:100%}

body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}

a:hover{cursor:pointer}

img,object,embed{max-width:100%;height:auto}

object,embed{height:100%}

img{-ms-interpolation-mode:bicubic}

.left{float:left!important}

.right{float:right!important}

.text-left{text-align:left!important}

.text-right{text-align:right!important}

.text-center{text-align:center!important}

.text-justify{text-align:justify!important}

.hide{display:none}

img,object,svg{display:inline-block;vertical-align:middle}

textarea{height:auto;min-height:50px}

select{width:100%}

.center{margin-left:auto;margin-right:auto}

.stretch{width:100%}

.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}

div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}

a{color:#2156a5;text-decoration:underline;line-height:inherit}

a:hover,a:focus{color:#1d4b8f}

a img{border:0}

p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}

p aside{font-size:.875em;line-height:1.35;font-style:italic}

h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#34478c;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}

h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}

h1{font-size:2.125em}

h2{font-size:1.6875em}

h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}

h4,h5{font-size:1.125em}

h6{font-size:1em}

hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}

em,i{font-style:italic;line-height:inherit}

strong,b{font-weight:bold;line-height:inherit}

small{font-size:60%;line-height:inherit}

code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}

ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}

ul,ol{margin-left:1.5em}

ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}

ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}

ul.square{list-style-type:square}

ul.circle{list-style-type:circle}

ul.disc{list-style-type:disc}

ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}

dl dt{margin-bottom:.3125em;font-weight:bold}

dl dd{margin-bottom:1.25em}

abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}

abbr{text-transform:none}

blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}

blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}

blockquote cite::before{content:"\2014 \0020"}

blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}

blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}

@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}

h1{font-size:2.75em}

h2{font-size:2.3125em}

h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}

h4{font-size:1.4375em}}

table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}

table thead,table tfoot{background:#f7f8f7}

table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}

table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}

table tr.even,table tr.alt{background:#f8f8f7}

table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}

h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}

h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}

.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}

.clearfix::after,.float-group::after{clear:both}

:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}

:not(pre)>code.nobreak{word-wrap:normal}

:not(pre)>code.nowrap{white-space:nowrap}

pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}

pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}

pre>code{display:block}

pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}

em em{font-style:normal}

strong strong{font-weight:400}

.keyseq{color:rgba(51,51,51,.8)}

kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}

.keyseq kbd:first-child{margin-left:0}

.keyseq kbd:last-child{margin-right:0}

.menuseq,.menuref{color:#000}

.menuseq b:not(.caret),.menuref{font-weight:inherit}

.menuseq{word-spacing:-.02em}

.menuseq b.caret{font-size:1.25em;line-height:.8}

.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}

b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}

b.button::before{content:"[";padding:0 3px 0 2px}

b.button::after{content:"]";padding:0 2px 0 3px}

p a>code:hover{color:rgba(0,0,0,.9)}

#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}

#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}

#header::after,#content::after,#footnotes::after,#footer::after{clear:both}

#content{margin-top:1.25em}

#content::before{content:none}

#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}

#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}

#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}

#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}

#header .details span:first-child{margin-left:-.125em}

#header .details span.email a{color:rgba(0,0,0,.85)}

#header .details br{display:none}

#header .details br+span::before{content:"\00a0\2013\00a0"}

#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}

#header .details br+span#revremark::before{content:"\00a0|\00a0"}

#header #revnumber{text-transform:capitalize}

#header #revnumber::after{content:"\00a0"}

#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}

#toc{

  border-bottom:1px solid #e7e7e9;

  padding-bottom:.5em;

  width: 230px;

}

#toc>ul{margin-left:.125em}

#toc ul.sectlevel0>li>a{font-style:italic}

#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}

#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}

#toc li{line-height:1.3334;margin-top:.3334em}

#toc a{

  font-family: "Work Sans", "Helvetica", "Tahoma", "Geneva", "Arial", sans-serif;

  text-decoration:none;

  color:#ccc;

  display: block;

  font-size:1rem;

  line-height: 2rem;

}

#toc a:hover{color:#e6e6e6}

#toc a:active{

  text-decoration:none;

  color:#777;

}

#toctitle{

  padding-top:0;

  overflow:hidden;

  background:#283e5b;

  border-bottom: 4px solid #435c7c;

  width:320px;

  height:154px;

  top:0;

  left:0;

  color: #283e5b;

}

@media screen and (min-width:768px){#toctitle{font-size:1.375em}

body.toc2{padding-left:15em;padding-right:0}

#toc.toc2{margin-top:0!important;background:#1c222a;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;/*! padding:1.25em 1em; */height:100%;overflow:auto;padding-right: 0px;}

#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}

#toc.toc2>ul{font-size:.9em;margin-bottom:0}

#toc.toc2 ul ul{margin-left:0;padding-left:1em}

#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}

body.toc2.toc-right{padding-left:0;padding-right:15em}

body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}

@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}

#toc.toc2{width:20em}

#toc.toc2 #toctitle{

  font-size:1.375em;

  background-repeat: no-repeat;

  background-size: 160.8px 136.483px;

  background-position: center;

  }

#toc.toc2>ul{font-size:.95em}

#toc.toc2 ul ul{padding-left:1.25em}

body.toc2.toc-right{padding-left:0;padding-right:20em}}

#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}

#content #toc>:first-child{margin-top:0}

#content #toc>:last-child{margin-bottom:0}

#footer{max-width:100%;background:#1c222a;padding:1.25em}

#footer-text{color:rgba(255,255,255,.8);line-height:1.44;/*! background: #e6e6e6; */}

#content{margin-bottom:.625em}

.sect1{padding-bottom:.625em}

@media screen and (min-width:768px){#content{margin-bottom:1.25em}

.sect1{padding-bottom:1.25em}}

.sect1:last-child{padding-bottom:0}

.sect1+.sect1{border-top:1px solid #e7e7e9}

#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}

#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}

#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}

#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}

#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}

details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}

details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}

.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}

table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}

.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}

table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}

.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}

.admonitionblock>table td.icon{text-align:center;width:80px}

.admonitionblock>table td.icon img{max-width:none}

.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}

.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}

.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}

.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}

.exampleblock>.content>:first-child{margin-top:0}

.exampleblock>.content>:last-child{margin-bottom:0}

.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}

.sidebarblock>:first-child{margin-top:0}

.sidebarblock>:last-child{margin-bottom:0}

.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}

.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}

.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}

@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}

@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}

.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}

.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}

.listingblock>.content{position:relative}

.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}

.listingblock:hover code[data-lang]::before{display:block}

.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}

.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}

.listingblock pre.highlightjs{padding:0}

.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}

.listingblock pre.prettyprint{border-width:0}

.prettyprint{background:#f7f7f8}

pre.prettyprint .linenums{line-height:1.45;margin-left:2em}

pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}

pre.prettyprint li code[data-lang]::before{opacity:1}

pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}

table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}

table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}

table.linenotable td.code{padding-left:.75em}

table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}

pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}

pre.pygments .lineno::before{content:"";margin-right:-.125em}

.quoteblock{margin:0 1em 1.25em 1.5em;display:table}

.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}

.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}

.quoteblock blockquote{margin:0;padding:0;border:0}

.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}

.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}

.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}

.verseblock{margin:0 1em 1.25em}

.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}

.verseblock pre strong{font-weight:400}

.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}

.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}

.quoteblock .attribution br,.verseblock .attribution br{display:none}

.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}

.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}

.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}

.quoteblock.abstract{margin:0 1em 1.25em;display:block}

.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}

.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}

.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}

.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}

.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}

table.tableblock{max-width:100%;border-collapse:separate}

p.tableblock:last-child{margin-bottom:0}

td.tableblock>.content>:last-child{margin-bottom:-1.25em}

td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}

table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}

table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}

table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}

table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}

table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}

table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}

table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}

table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}

table.frame-all{border-width:1px}

table.frame-sides{border-width:0 1px}

table.frame-topbot,table.frame-ends{border-width:1px 0}

table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}

th.halign-left,td.halign-left{text-align:left}

th.halign-right,td.halign-right{text-align:right}

th.halign-center,td.halign-center{text-align:center}

th.valign-top,td.valign-top{vertical-align:top}

th.valign-bottom,td.valign-bottom{vertical-align:bottom}

th.valign-middle,td.valign-middle{vertical-align:middle}

table thead th,table tfoot th{font-weight:bold}

tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}

tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}

p.tableblock>code:only-child{background:none;padding:0}

p.tableblock{font-size:1em}

ol{margin-left:1.75em}

ul li ol{margin-left:1.5em}

dl dd{margin-left:1.125em}

dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}

ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}

ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}

ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}

ul.unstyled,ol.unstyled{margin-left:0}

ul.checklist{margin-left:.625em}

ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}

ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}

ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}

ul.inline>li{margin-left:1.25em}

.unstyled dl dt{font-weight:400;font-style:normal}

ol.arabic{list-style-type:decimal}

ol.decimal{list-style-type:decimal-leading-zero}

ol.loweralpha{list-style-type:lower-alpha}

ol.upperalpha{list-style-type:upper-alpha}

ol.lowerroman{list-style-type:lower-roman}

ol.upperroman{list-style-type:upper-roman}

ol.lowergreek{list-style-type:lower-greek}

.hdlist>table,.colist>table{border:0;background:none}

.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}

td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}

td.hdlist1{font-weight:bold;padding-bottom:1.25em}

.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}

.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}

.colist td:not([class]):first-child img{max-width:none}

.colist td:not([class]):last-child{padding:.25em 0}

.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}

.imageblock.left{margin:.25em .625em 1.25em 0}

.imageblock.right{margin:.25em 0 1.25em .625em}

.imageblock>.title{margin-bottom:0}

.imageblock.thumb,.imageblock.th{border-width:6px}

.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}

.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}

.image.left{margin-right:.625em}

.image.right{margin-left:.625em}

a.image{text-decoration:none;display:inline-block}

a.image object{pointer-events:none}

sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}

sup.footnote a,sup.footnoteref a{text-decoration:none}

sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}

#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}

#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}

#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}

#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}

#footnotes .footnote:last-of-type{margin-bottom:0}

#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}

.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}

.gist .file-data>table td.line-data{width:99%}

div.unbreakable{page-break-inside:avoid}

.big{font-size:larger}

.small{font-size:smaller}

.underline{text-decoration:underline}

.overline{text-decoration:overline}

.line-through{text-decoration:line-through}

.aqua{color:#00bfbf}

.aqua-background{background:#00fafa}

.black{color:#000}

.black-background{background:#000}

.blue{color:#0000bf}

.blue-background{background:#0000fa}

.fuchsia{color:#bf00bf}

.fuchsia-background{background:#fa00fa}

.gray{color:#606060}

.gray-background{background:#7d7d7d}

.green{color:#006000}

.green-background{background:#007d00}

.lime{color:#00bf00}

.lime-background{background:#00fa00}

.maroon{color:#600000}

.maroon-background{background:#7d0000}

.navy{color:#000060}

.navy-background{background:#00007d}

.olive{color:#606000}

.olive-background{background:#7d7d00}

.purple{color:#600060}

.purple-background{background:#7d007d}

.red{color:#bf0000}

.red-background{background:#fa0000}

.silver{color:#909090}

.silver-background{background:#bcbcbc}

.teal{color:#006060}

.teal-background{background:#007d7d}

.white{color:#bfbfbf}

.white-background{background:#fafafa}

.yellow{color:#bfbf00}

.yellow-background{background:#fafa00}

span.icon>.fa{cursor:default}

a span.icon>.fa{cursor:inherit}

.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}

.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}

.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}

.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}

.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}

.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}

.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}

.conum[data-value] *{color:#fff!important}

.conum[data-value]+b{display:none}

.conum[data-value]::after{content:attr(data-value)}

pre .conum[data-value]{position:relative;top:-.125em}

b.conum *{color:inherit!important}

.conum:not([data-value]):empty{display:none}

dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}

h1,h2,p,td.content,span.alt{letter-spacing:-.01em}

p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}

p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}

p{margin-bottom:1.25rem}

.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}

.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}

.print-only{display:none!important}

@page{margin:1.25cm .75cm}

@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}

html{font-size:80%}

a{color:inherit!important;text-decoration:underline!important}

a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}

a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}

abbr[title]::after{content:" (" attr(title) ")"}

pre,blockquote,tr,img,object,svg{page-break-inside:avoid}

thead{display:table-header-group}

svg{max-width:100%}

p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}

h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}

#toc,.sidebarblock,.exampleblock>.content{background:none!important}

#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}

body.book #header{text-align:center}

body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}

body.book #header .details{border:0!important;display:block;padding:0!important}

body.book #header .details span:first-child{margin-left:0!important}

body.book #header .details br{display:block}

body.book #header .details br+span::before{content:none!important}

body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}

body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}

.listingblock code[data-lang]::before{display:block}

#footer{padding:0 .9375em}

.hide-on-print{display:none!important}

.print-only{display:block!important}

.hide-for-print{display:none!important}

.show-for-print{display:inherit!important}}

@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}

.sect1{padding:0!important}

.sect1+.sect1{border:0}

#footer{background:none}

#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}

@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}



/* -------------------------   QS CSS entries ---------------------------- */

@font-face {

  font-family: 'Amazon Ember Light';

  src        :

    local('Amazon Ember Light'),

    local('AmazonEmberLight'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_lt-019e0ec3f9b521056e66e31fdcbc8323e5cd1938._V299195751_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_lt-bc9ed0fce860a46f3cb061034280c23400e6e8b6._V299195751_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Light';

  font-weight: 700;

  src        :

    local('Amazon Ember Light'),

    local('AmazonEmberLight-Bold'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-46b91bda68161c14e554a779643ef4957431987b._V2_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-b605252f87b8b3df5ae206596dac0938fc5888bc._V2_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Light';

  font-style : italic;

  src        :

    local('Amazon Ember Light'),

    local('AmazonEmberLight-Italic'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_ltit-96be47a559388a2b219577124589435c09a361fe._V299195751_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_ltit-b561f11b5c8be92ac17f6b713dd9d4b6e2f00c8d._V299195751_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Light';

  font-style : italic;

  font-weight: 700;

  src        :

    local('Amazon Ember Light'),

    local('AmazonEmberLight-BoldItalic'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_ltit-96be47a559388a2b219577124589435c09a361fe._V299195751_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_ltit-b561f11b5c8be92ac17f6b713dd9d4b6e2f00c8d._V299195751_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Regular';

  src        :

    local('Amazon Ember Regular'),

    local('AmazonEmberRegular'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_rg-fd81bacb6a659a8c8c95828226b74594ab985060._V299195749_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_rg-0acf3bc8b64d470d8888d84741a19533394654c6._V299195749_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Regular';

  font-weight: 700;

  src        :

    local('Amazon Ember Regular'),

    local('AmazonEmberRegular-Bold'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-46b91bda68161c14e554a779643ef4957431987b._V2_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-b605252f87b8b3df5ae206596dac0938fc5888bc._V2_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Regular';

  font-style : italic;

  src        :

    local('Amazon Ember Regular'),

    local('AmazonEmberRegular-Italic'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_rgit-af980fe9c64fc17ece72cba4e3e7fdf54babeea6._V299195748_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_rgit-4fae4842b3446774d86579b9b024858a848644e8._V299195748_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Regular';

  font-style : italic;

  font-weight: 700;

  src        :

    local('Amazon Ember Regular'),

    local('AmazonEmberRegular-BoldItalic'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-80ff7aba37dd1ff5a6b90233a19e3a780a96dc2f._V2_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-57598ce426a612be5a1d15eee08252668fca5e7a._V2_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Medium';

  src        :

    local('Amazon Ember Medium'),

    local('AmazonEmberMedium'),

    url('https://m.media-amazon.com/images/G/01/amazonservices/fonts/amazonember_md_base-webfont._V525237381_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/amazonservices/fonts/amazonember_md_base-webfont._V525237386_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Medium';

  font-weight: 700;

  src        :

    local('Amazon Ember Medium'),

    local('AmazonEmberMedium-Bold'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-46b91bda68161c14e554a779643ef4957431987b._V2_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-b605252f87b8b3df5ae206596dac0938fc5888bc._V2_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Medium';

  font-style : italic;

  src        :

    local('Amazon Ember Medium'),

    local('AmazonEmberMedium-Italic'),

    url('https://m.media-amazon.com/images/G/01/agdm/fonts/amazonember/amazonember_mdit-webfont._V522331917_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/agdm/fonts/amazonember/amazonember_mdit-webfont._V522331917_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Medium';

  font-style : italic;

  font-weight: 700;

  src        :

    local('Amazon Ember Medium'),

    local('AmazonEmberMedium-BoldItalic'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-80ff7aba37dd1ff5a6b90233a19e3a780a96dc2f._V2_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-57598ce426a612be5a1d15eee08252668fca5e7a._V2_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Heavy';

  src        :

    local('Amazon Ember Heavy'),

    local('AmazonEmberHeavy'),

    url('https://m.media-amazon.com/images/G/01/acs/fonts/amazonember_he-webfont._V278446113_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/acs/fonts/amazonember_he-webfont._V278446115_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Heavy';

  font-weight: 700;

  src        :

    local('Amazon Ember Heavy'),

    local('AmazonEmberHeavy-Bold'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-46b91bda68161c14e554a779643ef4957431987b._V2_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-b605252f87b8b3df5ae206596dac0938fc5888bc._V2_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Heavy';

  font-style : italic;

  src        :

    local('Amazon Ember Heavy'),

    local('AmazonEmberHeavy-Italic'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-80ff7aba37dd1ff5a6b90233a19e3a780a96dc2f._V2_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-57598ce426a612be5a1d15eee08252668fca5e7a._V2_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Heavy';

  font-style : italic;

  font-weight: 700;

  src        :

    local('Amazon Ember Heavy'),

    local('AmazonEmberHeavy-BoldItalic'),

    url('https://m.media-amazon.com/images/G/01/agdm/fonts/amazonember/amazonember_heit-webfont._V522331917_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/agdm/fonts/amazonember/amazonember_heit-webfont._V522331917_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Thin';

  src        :

    local('Amazon Ember Thin'),

    local('AmazonEmberThin'),

    url('https://m.media-amazon.com/images/G/01/mobile-apps/devportal2/content/alexa/prize/20160810/fonts/AmazonEmber/amazonember-thin-webfont._V282715032_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/mobile-apps/devportal2/content/alexa/prize/20160810/fonts/AmazonEmber/amazonember-thin-webfont._V282715033_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Thin';

  font-weight: 700;

  src        :

    local('Amazon Ember Thin'),

    local('AmazonEmberThin-Bold'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-46b91bda68161c14e554a779643ef4957431987b._V2_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-b605252f87b8b3df5ae206596dac0938fc5888bc._V2_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Thin';

  font-style : italic;

  src        :

    local('Amazon Ember Thin'),

    local('AmazonEmberThin-Italic'),

    url('https://m.media-amazon.com/images/G/01/mobile-apps/devportal2/content/alexa/prize/20160810/fonts/AmazonEmber/amazonember-thinit-webfont._V282715033_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/mobile-apps/devportal2/content/alexa/prize/20160810/fonts/AmazonEmber/amazonember-thinit-webfont._V282715032_.woff') format('woff');

}



@font-face {

  font-family: 'Amazon Ember Thin';

  font-style : italic;

  font-weight: 700;

  src        :

    local('Amazon Ember Thin'),

    local('AmazonEmberThin-BoldItalic'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-80ff7aba37dd1ff5a6b90233a19e3a780a96dc2f._V2_.woff2') format('woff2'),

    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-57598ce426a612be5a1d15eee08252668fca5e7a._V2_.woff') format('woff');

}





.tip {

  border-top: 30px solid rgba(92, 184, 92, 0.8);

  background: #E6F9E6;

}



.note {

  border-top: 30px solid #6AB0DE;

  background: #E7F2FA;

}



.warning {

  border-top: 30px solid #F0B37E;

  background: #FFF2DB;

}



.caution {

  border-top: 30px solid rgba(217, 83, 79, 0.8);

  background: #FAE2E2;

}



.important {

  border-top: 30px solid rgba(217, 83, 79, 0.8);

  background: #FAE2E2;

}



#content {

  max-width: 100rem;

  padding-left: 5rem;

  padding-right: 5rem;

}



body {

  font-family: "Amazon Ember Regular", "Helvetica", "Tahoma", "Geneva", "Arial", sans-serif;

}



/* added */

h1,

h2,

h3,

h4,

h5,

h6 {

  margin        : 0.85rem 0 1.7rem 0;

  text-rendering: optimizeLegibility;

  color: #ec7211;

}



p {

  margin: 1rem 0;

}



/* QS Table of Contents */



#toc {

  overflow-x: hidden !important;

}



#toc>ul li {

  padding    : 0.3rem 0.6rem;

  margin-top : 0;

  line-height: 1;

}



#toc>ul li a {

  line-height: 1.6;

}



#toc a {

  /* TOC details */

  font-family  : "Amazon Ember Light", "Helvetica", "Tahoma", "Geneva", "Arial", sans-serif;

  margin-left  : -1rem;

  margin-right : -1rem;

  padding-left : 1rem;

  padding-right: 1rem;

  background   : transparent;

  box-sizing   : border-box;

  cursor       : pointer;

  font-weight  : 300 !important;

}



#toc.toc2 #toctitle{

  background-image: url('images/AWS-Logo.svg');

}



/* QS Tables */



table.tableblock .title,

.imageblock .title {

  font-family  : "Amazon Ember Light", "Helvetica", "Tahoma", "Geneva", "Arial", sans-serif;

  font-size: 1.1rem;

  color: #34478c;

}

table p {

  margin: 0rem;

}



/* Add border around hyperlink images */

a img {

    border: 1px solid #A4A4A4;

}



#preview_mode {

	border-color:#e0e0dc;

	-webkit-box-shadow:0 1px 4px #e0e0dc;

	box-shadow:0 1px 4px #e0e0dc;

  background:#ffffb3;

  padding-bottom: 2rem;

}

#preview_mode .tableblock {

  background:#ffffb3;

}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_overview">Overview</a></li>
<li><a href="#_microsoft_sharepoint_on_aws">Microsoft SharePoint on AWS</a></li>
<li><a href="#_cost">Cost</a></li>
<li><a href="#_software_licenses">Software licenses</a></li>
<li><a href="#_architecture">Architecture</a>
<ul class="sectlevel2">
<li><a href="#vpc-configuration">VPC configuration</a></li>
<li><a href="#active-directory-domain-services">Active Directory Domain Services</a></li>
<li><a href="#remote-administration">Remote administration</a></li>
</ul>
</li>
<li><a href="#_planning_the_deployment">Planning the deployment</a>
<ul class="sectlevel2">
<li><a href="#_specialized_knowledge">Specialized knowledge</a></li>
<li><a href="#_aws_account">AWS account</a></li>
<li><a href="#_technical_requirements">Technical requirements</a></li>
</ul>
</li>
<li><a href="#_deployment_steps">Deployment steps</a>
<ul class="sectlevel2">
<li><a href="#_sign_in_to_your_aws_account">Sign in to your AWS account</a></li>
<li><a href="#_launch_the_quick_start">Launch the Quick Start</a></li>
<li><a href="#_parameters_for_deploying_a_sharepoint_farm_into_an_existing_vpc">Parameters for deploying a SharePoint farm into an existing VPC</a></li>
<li><a href="#_parameters_for_deploying_a_sharepoint_farm_into_a_new_vpc">Parameters for deploying a SharePoint farm into a new VPC</a></li>
<li><a href="#_parameters_for_deploying_a_single_sharepoint_server_into_an_existing_vpc">Parameters for deploying a single SharePoint server into an existing VPC</a></li>
</ul>
</li>
<li><a href="#_post_deployment_steps">Post-deployment steps</a>
<ul class="sectlevel2">
<li><a href="#_create_initial_content">Create initial content</a></li>
<li><a href="#_make_the_sharepoint_databases_highly_available">Make the SharePoint databases highly available</a></li>
<li><a href="#provide-log-access-to-the-secondary-database-server">Provide log access to the secondary database server</a></li>
<li><a href="#_enable_multiple_subnet_failover">Enable multiple-subnet failover</a></li>
<li><a href="#_test_automatic_failover">Test automatic failover</a></li>
</ul>
</li>
<li><a href="#_additional_resources">Additional resources</a>
<ul class="sectlevel2">
<li><a href="#_appendix_a_server_role_architecture">Appendix A: Server role architecture</a></li>
<li><a href="#_aws_services">AWS services</a></li>
</ul>
</li>
<li><a href="#_faq">FAQ</a></li>
<li><a href="#_troubleshooting">Troubleshooting</a></li>
<li><a href="#_send_us_feedback">Send us feedback</a></li>
<li><a href="#_quick_start_reference_deployments">Quick Start reference deployments</a></li>
<li><a href="#_github_repository">GitHub repository</a>
<ul class="sectlevel3">
<li><a href="#_notices">Notices</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<h2 id="_microsoft_sharepoint_on_the_aws_cloud" class="discrete text-center">Microsoft SharePoint on the AWS Cloud</h2>
<h2 id="_quick_start_reference_deployment" class="discrete text-left text-center">Quick Start Reference Deployment</h2>
<div class="imageblock text-center">
<div class="content">
<img src="https://aws-quickstart.s3.amazonaws.com/quickstart-microsoft-sharepoint/docs/boilerplate/.images/aws-quickstart-graphic.png" alt="QS" width="80" height="80">
</div>
</div>
<div class="paragraph text-center">
<p><strong>October 2020</strong><br>
<em>AWS Quick Start team</em></p>
</div>
<div class="admonitionblock tip text-left">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Visit our <a href="https://github.com/aws-quickstart/quickstart-microsoft-sharepoint" target="_blank" rel="noopener">GitHub repository</a> for source files and to post feedback,
report bugs, or submit feature ideas for this Quick Start.
</td>
</tr>
</table>
</div>
<div class="paragraph text-left">
<p>This Quick Start was created by Amazon Web Services (AWS). <a href="http://aws.amazon.com/quickstart/" target="_blank" rel="noopener">Quick Starts</a> are automated reference deployments that use AWS CloudFormation templates to deploy key technologies on AWS, following AWS best practices.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This Quick Start reference deployment guide provides step-by-step instructions for deploying SharePoint on the AWS Cloud.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Amazon may share user-deployment information with the AWS Partner that collaborated with AWS on the Quick Start.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_microsoft_sharepoint_on_aws">Microsoft SharePoint on AWS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The AWS Cloud provides a suite of infrastructure services that deploys SharePoint Server 2019 securely, affordably, and with high availability. Running SharePoint Server on the AWS Cloud gives you flexibility and agility, and you can fully customize and extend SharePoint for your business processes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cost">Cost</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You are responsible for the cost of the AWS services used while running
this Quick Start. There is no additional cost for
using the Quick Start.</p>
</div>
<div class="paragraph">
<p>The AWS CloudFormation template for this Quick Start includes
configuration parameters that you can customize. Some of the settings,
such as the instance type, affect the cost of deployment. For cost estimates,
see the pricing pages for each AWS service you use. Prices are subject to change.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
After you deploy the Quick Start, enable the <a href="https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/billing-reports-gettingstarted-turnonreports.html" target="_blank" rel="noopener">AWS Cost and Usage Report</a> to deliver billing metrics to an Amazon Simple Storage Service (Amazon S3) bucket in your account. It provides cost estimates based on usage throughout each month and aggregates the data at the end of the month. For more information about the report, see the <a href="https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/billing-reports-costusage.html" target="_blank" rel="noopener">AWS documentation</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_software_licenses">Software licenses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This Quick Start requires a license for Microsoft SharePoint 2019. The product key defaults to a trial key, which will allow the environment to run for 180 days.
The trial key can be replaced by a purchased key at launch time, or can be updated after the environment has been provisioned.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_architecture">Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are a number of ways to design the topology of your SharePoint farm depending on your requirements. In SharePoint 2016, Microsoft added a feature called MinRole, which helped simplify deployment, performance, and reliability of SharePoint farms. This approach is used for the multiple-server AWS CloudFormation template provided by this Quick Start. (The single-server option is deployed as a custom role so that it can run more services on its own.) Both the multiple-server and single-server topologies are covered in detail later in this guide.</p>
</div>
<div class="paragraph">
<p>Deploying this Quick Start for a new virtual private cloud (VPC) with
default parameters builds the following SharePoint environment in the AWS Cloud.</p>
</div>
<div id="architecture1" class="imageblock">
<div class="content">
<a class="image" href="images/architecture_diagram.png"><img src="images/architecture_diagram.png" alt="Architecture1" width="740" height="434"></a>
</div>
<div class="title">Figure 1. Quick Start architecture for SharePoint on AWS</div>
</div>
<div class="paragraph">
<p>As shown in <a href="#architecture1">Figure 1</a>, the Quick Start sets up the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A highly available architecture that spans two Availability Zones.*</p>
</li>
<li>
<p>A VPC configured with public and private subnets, according to AWS
best practices, to provide you with your own virtual network on AWS.*</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the public subnets:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Managed network address translation (NAT) gateways to allow outbound
internet access for resources in the private subnets.*</p>
</li>
<li>
<p>A Remote Desktop Gateway (RD Gateway) in an Auto Scaling group to allow Remote Desktop Protocol (RDP) access to Amazon Elastic Compute Cloud (Amazon EC2) instances in public and private subnets.*</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the private subnets:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An Application Load Balancer for the SharePoint front-end servers.</p>
</li>
<li>
<p>Two Amazon EC2 instances serving as Microsoft SharePoint front-end servers.</p>
</li>
<li>
<p>A Network Load Balancer for the SharePoint application servers.</p>
</li>
<li>
<p>Two Amazon EC2 instances serving as Microsoft SharePoint application servers.</p>
</li>
<li>
<p>Two Amazon EC2 instances serving as Microsoft SQL servers in a highly-available cluster.</p>
</li>
<li>
<p>An Amazon EC2 instance serving as a Windows failover clustering file share witness.</p>
</li>
<li>
<p>Two Amazon EC2 instances serving as Microsoft Active Directory (AD) domain controllers.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>*The template that deploys the Quick Start into an existing VPC skips
the components marked by asterisks and prompts you for your existing VPC
configuration.</p>
</div>
<div class="paragraph">
<p>The AWS CloudFormation templates provided with this Quick Start deploy the SharePoint servers shown in <a href="#architecture1">Figure 1</a>. Active Directory and SQL Server are deployed via their corresponding Quick Starts. See the <a href="#deployment-steps">Deployment Steps</a> section for more details. The template deploys a highly available architecture that includes redundant servers for SharePoint Server 2019 in two Availability Zones.</p>
</div>
<div class="paragraph">
<p>The following sections describe these components of the architecture in more detail. For more information about the server role architecture, including a detailed discussion of multiple-server and single-server topologies, see <a href="#appendix-a-server-role-architecture">Appendix A</a>.</p>
</div>
<div class="sect2">
<h3 id="vpc-configuration">VPC configuration</h3>
<div class="paragraph">
<p>When deploying a Windows-based architecture on the AWS Cloud, we recommend a VPC configuration that supports the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Critical workloads should be placed in a minimum of two Availability Zones to provide high availability.</p>
</li>
<li>
<p>Internal application servers and other non-internet facing servers should be placed in private subnets to prevent direct access to these instances from the internet.</p>
</li>
<li>
<p>RD Gateways should be deployed into public subnets in each Availability Zone for remote administration. Other components, such as reverse proxy servers, can also be placed into these public subnets if needed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For details on the VPC design used in this reference, see the <a href="https://fwd.aws/N6e7B">Active Directory Domain Services Quick Start deployment guide</a>.</p>
</div>
<div class="paragraph">
<p>Based on these best practices, the VPC Quick Start deploys the following base-level VPC framework to support the SharePoint Server 2019 infrastructure:</p>
</div>
<div id="architecture2" class="imageblock">
<div class="content">
<a class="image" href="images/image3.png"><img src="images/image3.png" alt="Architecture2" width="648" height="427"></a>
</div>
<div class="title">Figure 2. VPC architecture on the AWS cloud</div>
</div>
<div class="paragraph">
<p>As shown in <a href="#architecture2">Figure 2</a>, NAT gateways are deployed into the public subnets. The public subnets have a route to the internet directly through the internet gateway attached to the VPC.</p>
</div>
<div class="paragraph">
<p>Instances that will be deployed in the private subnets have no direct route to the internet. Instead, instances in private subnets use private routes to send internet traffic to the NAT gateways in the public subnets. This architecture isolates your critical workloads from direct internet access.</p>
</div>
</div>
<div class="sect2">
<h3 id="active-directory-domain-services">Active Directory Domain Services</h3>
<div class="paragraph">
<p>To provide user authentication and authorization, the Microsoft SharePoint servers in this reference architecture use Active Directory Domain Services (AD DS). As you deploy your environment, you should place at least one domain controller in a private subnet in each Availability Zone for redundancy and high availability.</p>
</div>
<div id="architecture3" class="imageblock">
<div class="content">
<a class="image" href="images/image4.png"><img src="images/image4.png" alt="Architecture3" width="648" height="373"></a>
</div>
<div class="title">Figure 3. Domain controllers in each Availability Zone</div>
</div>
<div class="paragraph">
<p>Notice that in <a href="#architecture3">Figure 3</a>, we’ve now included a domain controller in the AD tier in each Availability Zone.</p>
</div>
<div class="paragraph">
<p>There are two ways to use AD DS in the AWS Cloud:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cloud only – This is the architecture shown in <a href="#architecture3">Figure 3</a>. This type of architecture means that your entire AD forest exists only within the AWS Cloud. With a cloud-only AD DS architecture, there are no on-premises domain controllers.</p>
</li>
<li>
<p>Hybrid – The hybrid architecture takes advantage of your existing AD DS environment. You can extend your private, on-premises network to AWS so the resources in the cloud can utilize your existing AD infrastructure. In a hybrid architecture, we recommend that you also deploy domain controllers for your existing AD forest to the AWS Cloud. We recommend this configuration primarily to help ensure that the application servers deployed in AWS remain functional and available in the event of an on-premises outage.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <a href="https://fwd.aws/N6e7B">Quick Start for Active Directory Domain Services on the AWS Cloud</a> covers our best practices and recommendations for deploying AD DS on AWS. The process outlined in this SharePoint Quick Start asks you to launches the AD DS Quick Start, which deploys the AD environment based on those best practices.</p>
</div>
</div>
<div class="sect2">
<h3 id="remote-administration">Remote administration</h3>
<div class="paragraph">
<p>As we design the architecture for a highly available SharePoint farm, we should also design for highly available and secure remote access. We can do this by deploying an RD Gateway in each Availability Zone. In the case of an Availability Zone outage, this architecture allows access to the resources that may have failed over to the other Availability Zone.</p>
</div>
<div class="paragraph">
<p>The RD Gateway uses the Remote Desktop Protocol (RDP) over HTTPS to establish a secure, encrypted connection between remote administrators on the internet and Windows-based EC2 instances, without needing to configure a virtual private network (VPN) connection. This allows you to reduce the attack surface on your Windows-based instances while providing a remote administration solution for administrators.</p>
</div>
<div id="architecture4" class="imageblock">
<div class="content">
<a class="image" href="images/image5.png"><img src="images/image5.png" alt="Architecture4" width="648" height="378"></a>
</div>
<div class="title">Figure 4. NAT gateways and Remote Desktop Gateways in public subnets</div>
</div>
<div class="paragraph">
<p>The AWS CloudFormation templates provided in this Quick Start automatically deploy the architecture described in <a href="https://fwd.aws/5VrKP">Remote Desktop Gateway on the AWS Cloud: Quick Start Reference Deployment</a>. After you have launched your SharePoint infrastructure using a deployment option in this guide, you will initially connect to your instances using a standard RDP TCP port 3389 connection. You can then follow the steps in the guide to secure future connections via HTTPS.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_planning_the_deployment">Planning the deployment</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_specialized_knowledge">Specialized knowledge</h3>
<div class="paragraph">
<p>This deployment guide requires a moderate level of familiarity with
AWS services. If you’re new to AWS, visit the
<a href="https://aws.amazon.com/getting-started/" target="_blank" rel="noopener">Getting Started Resource Center</a>
and the <a href="https://aws.amazon.com/training/">AWS Training and Certification
website</a>. These sites provide materials for learning how to design,
deploy, and operate your infrastructure and applications on the AWS
Cloud.</p>
</div>
<div class="paragraph">
<p>This Quick Start assumes familiarity with Microsoft SharePoint, Microsoft SQL, and Microsoft Active Directory.</p>
</div>
</div>
<div class="sect2">
<h3 id="_aws_account">AWS account</h3>
<div class="paragraph">
<p>If you don’t already have an AWS account, create one at <a href="https://aws.amazon.com/" target="_blank" rel="noopener">https://aws.amazon.com</a> by following the on-screen instructions. Part of the sign-up process involves receiving a phone call and entering a PIN using the phone keypad.</p>
</div>
<div class="paragraph">
<p>Your AWS account is automatically signed up for all AWS services. You are charged only for the services you use.</p>
</div>
</div>
<div class="sect2">
<h3 id="_technical_requirements">Technical requirements</h3>
<div class="paragraph">
<p>Before you launch the Quick Start, your account must be configured as specified in the following table. Otherwise, deployment might fail.</p>
</div>
<div class="sect3">
<h4 id="_resource_limits">Resource limits</h4>
<div class="paragraph">
<p>If necessary, request <a href="https://console.aws.amazon.com/servicequotas/home?region=us-east-2#!/" target="_blank" rel="noopener">service quota increases</a> for the following resources. You might need to request increases if your existing deployment currently uses these resources, and this Quick Start deployment could result in exceeding the default quotas. The <a href="https://console.aws.amazon.com/servicequotas/home?region=us-east-2#!/" target="_blank" rel="noopener">Service Quotas console</a> displays your usage and quotas for some aspects of some services. For more information, see the <a href="https://docs.aws.amazon.com/servicequotas/latest/userguide/intro.html" target="_blank" rel="noopener">AWS documentation</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Resource</th>
<th class="tableblock halign-left valign-top">This deployment uses</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VPCs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Elastic IP addresses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AWS Identity and Access Management (IAM) security groups</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IAM roles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Auto Scaling groups</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Load Balancers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network Load Balancers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EC2 instances</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_supported_regions">Supported Regions</h4>
<div class="paragraph">
<p>This Quick Start is available in all AWS Regions.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Certain Regions are available on an opt-in basis. Refer to the AWS Documentation on <a href="https://docs.aws.amazon.com/general/latest/gr/rande-manage.html" target="_blank" rel="noopener">Managing Regions</a> for more information.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_iam_permissions">IAM permissions</h4>
<div class="paragraph">
<p>Before launching the Quick Start, you must log in to the AWS Management Console with <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_job-functions.html" target="_blank" rel="noopener">IAM permissions</a> for the resources and actions the templates deploy.</p>
</div>
<div class="paragraph">
<p>The <em>AdministratorAccess</em> managed policy within IAM provides sufficient permissions, although your organization may choose to use a custom policy with more restrictions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_download_the_sharepoint_software">Download the SharePoint software</h4>
<div class="paragraph">
<p>To access the SharePoint Server 2019 installation media, you need to place the contents of the SharePoint installation ISO file in a .zip file. When creating this .zip file, you have the option of “slip streaming” additional cumulative updates into the file, which means that these updates will be automatically installed when SharePoint is installed. This can help you deploy SharePoint to a specific update level when it is first installed. The following steps show you how to create the .zip file and upload it to Amazon S3.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Download the evaluation edition of SharePoint 2019 from <a href="https://www.microsoft.com/en-us/download/details.aspx?id=57462">Microsoft Download Center</a>.</p>
<div class="paragraph">
<p>—or—</p>
</div>
<div class="paragraph">
<p>Obtain the ISO file from MSDN, if you have an MSDN account with licenses for server software.</p>
</div>
</li>
<li>
<p>Open the ISO file (in Windows, double-click the file to mount the ISO and open it), and copy the contents to a temporary location on your system.</p>
</li>
<li>
<p>(Optional) To include any additional updates, use the slip-streaming option:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><a href="https://docs.microsoft.com/en-us/officeupdates/sharepoint-updates">Download the updates</a> that you want to include.</p>
</li>
<li>
<p>Open a command prompt, and change the current path to the folder where you downloaded the updates.</p>
</li>
<li>
<p>To extract the updates to the updates folder in your installation media temporary folder, run the following command:</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>UpdateFileName.exe /extract:PathToUpdatesFolder</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In the command,</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>UpdateFileName</em> is the name of the file you downloaded for the update (for example, sts2019-kb4464556-fullfile-x64-glb.exe).</p>
</li>
<li>
<p><em>PathToUpdatesFolder</em> is the path to the folder called Updates that exists in the installation media that you extracted in Step 2. For example, if you extracted the media to C:\SPInstall, the path is C:\SPInstall\Updates.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Choose all of the files and folders in the directory on your system to which you extracted the installation media, open the context (right-click) menu, and choose <strong>Send To</strong>, <strong>Compressed (zipped) folder</strong>. This creates a .zip file of your installation media that can be used for the installation.</p>
</li>
<li>
<p>Sign in to your AWS account and open the <a href="https://console.aws.amazon.com/s3">Amazon S3 console</a>.</p>
</li>
<li>
<p>Choose <strong>Create Bucket</strong>.</p>
</li>
<li>
<p>Complete the <strong>Create a Bucket</strong> dialog box:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the <strong>Bucket Name</strong> box, enter a globally unique name for the bucket (for example, your account name).</p>
</li>
<li>
<p>In the <strong>Region</strong> list, select the AWS Region where you plan to launch the Quick Start.</p>
</li>
<li>
<p>Choose <strong>Create</strong>. The console displays your new bucket in the <strong>Buckets</strong> pane.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Choose the new bucket to navigate to it.</p>
</li>
<li>
<p>Choose <strong>Upload</strong>.</p>
</li>
<li>
<p>In the <strong>Upload – Select Files and Folders</strong> dialog box, choose <strong>Add Files</strong>.</p>
</li>
<li>
<p>In the file selection dialog box, browse to the .zip file that you created earlier, and choose <strong>Open</strong>, <strong>Start Upload</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Make a note of the bucket name and the file name that you used for your .zip file. You will use these later when you launch the SharePoint stack.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configure_aws_prerequisites">Configure AWS prerequisites</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This step is not required if you are deploying the SharePoint farm into a new VPC.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Before launching the SharePoint stack, the following prerequisites should be configured:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A VPC with two private subnets where SharePoint will run.</p>
</li>
<li>
<p>A Windows Active Directory server that runs the Domain Name Server (DNS) service.</p>
</li>
<li>
<p>A SQL Server 2016 or 2017 instance (or a highly available instance that has an Always On availability group configured with a listener attached to it).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you have not already, deploying the <a href="https://fwd.aws/N6e7B">Active Directory Domain Services on AWS</a> and <a href="https://fwd.aws/GRNKR">SQL Server on AWS</a> Quick Starts will provision these prerequisites. Refer to the Quick Start deployment guides for instructions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deployment_options">Deployment options</h4>
<div class="paragraph">
<p>This Quick Start provides three deployment options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Deploy SharePoint into a new VPC (end-to-end deployment)</strong>. This option builds a new AWS environment consisting of the VPC, subnets, NAT gateways, security groups, RD Gateway, Active Directory, Microsoft SQL, and other infrastructure components. It then deploys SharePoint into this new VPC.</p>
</li>
<li>
<p><strong>Deploy a SharePoint farm into an existing VPC</strong>. This option provisions a highly-available SharePoint farm in your existing AWS infrastructure.</p>
</li>
<li>
<p><strong>Deploy a single SharePoint server into an existing VPC</strong>. This option provisions a single SharePoint server in your existing AWS infrastructure.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Quick Start provides separate templates for these options. It also lets you configure Classless Inter-Domain Routing (CIDR) blocks, instance types, and SharePoint settings, as discussed later in this guide.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deployment_steps">Deployment steps</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_sign_in_to_your_aws_account">Sign in to your AWS account</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Sign in to your AWS account at <a href="https://aws.amazon.com" class="bare">https://aws.amazon.com</a> with an IAM user role that has the necessary permissions. For details, see <a href="#_planning_the_deployment">Planning the deployment</a> earlier in this guide.</p>
</li>
<li>
<p>Make sure that your AWS account is configured correctly, as discussed in the <a href="#_technical_requirements">Technical requirements</a> section.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_launch_the_quick_start">Launch the Quick Start</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You are responsible for the cost of the AWS services used while running this Quick Start reference deployment. There is no additional cost for using this Quick Start. For full details, see the pricing pages for each AWS service used by this Quick Start. Prices are subject to change.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Sign in to your AWS account, and choose one of the following options to launch the AWS CloudFormation template. For help with choosing an option, see <a href="#_deployment_options">deployment options</a> earlier in this guide.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="https://fwd.aws/AdxKM" target="_blank" rel="noopener">Deploy SharePoint into a new VPC on AWS</a></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="https://github.com/aws-quickstart/quickstart-microsoft-sharepoint/blob/master/templates/sharepoint-master.template.yaml" target="_blank" rel="noopener">View template</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="https://fwd.aws/z67Gy" target="_blank" rel="noopener">Deploy a SharePoint farm into an existing VPC on AWS</a></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="https://github.com/aws-quickstart/quickstart-microsoft-sharepoint/blob/master/templates/sharepoint-farm.template.yaml" target="_blank" rel="noopener">View template</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="https://fwd.aws/AmVKK" target="_blank" rel="noopener">Deploy a single SharePoint server into an existing VPC on AWS</a></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="https://github.com/aws-quickstart/quickstart-microsoft-sharepoint/blob/master/templates/sharepoint-single.template.yaml" target="_blank" rel="noopener">View template</a></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If you’re deploying SharePoint into an existing VPC, ensure that your VPC has two private subnets in different Availability Zones for the workload instances, and that the subnets aren’t shared. This Quick Start doesn’t support <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-sharing.html" target="_blank" rel="noopener">shared subnets</a>. These subnets require <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html" target="_blank" rel="noopener">NAT gateways</a> in their route tables, to allow the instances to download packages and software without exposing them to the internet.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Also, ensure that the domain name option in the DHCP options is configured as explained in the <a href="http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_DHCP_Options.html" target="_blank" rel="noopener">Amazon VPC documentation</a>. You provide your VPC settings when you launch the Quick Start.</p>
</div>
<div class="paragraph">
<p>Each deployment takes about 4 hours to complete.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Check the AWS Region that’s displayed in the upper-right corner of the navigation bar, and change it if necessary. This is where the network infrastructure for SharePoint will be built. The template is launched in the us-east-1 Region by default.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>On the <strong>Create stack</strong> page, keep the default setting for the template URL, and then choose <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Specify stack details</strong> page, change the stack name if needed. Review the parameters for the template. Provide values for the parameters that require input. For all other parameters, review the default settings and customize them as necessary.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the following tables, parameters are listed by category and described separately for the deployment options. When you finish reviewing and customizing the parameters, choose <strong>Next</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Unless you are customizing the Quick Start templates for your own deployment projects, we recommend that you keep the default settings for the parameters labeled <code>Quick Start S3 bucket name</code>, <code>Quick Start S3 bucket
Region</code>, and <code>Quick Start S3 key prefix</code>. Changing these parameter settings automatically updates code references to point to a new Quick Start location. For more information, see the <a href="https://aws-quickstart.github.io/option1.html" target="_blank" rel="noopener">AWS Quick Start Contributor’s Guide</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_parameters_for_deploying_a_sharepoint_farm_into_an_existing_vpc">Parameters for deploying a SharePoint farm into an existing VPC</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Network configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key pair name
(<code>KeyPairName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Public/private key pair that allows you to securely connect to your instance after it launches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VPC ID
(<code>VPCID</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the VPC (e.g., vpc-0343606e).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VPC CIDR
(<code>VPCCIDR</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.0/16</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIDR block for the VPC.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Private subnet 1 ID
(<code>Subnet1ID</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the first private subnet into which SharePoint will be deployed (e.g., subnet-a0246dcd).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Private subnet 2 ID
(<code>Subnet2ID</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the second private subnet into which SharePoint will be deployed (e.g., subnet-b58c3d67).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS server IP address
(<code>DNSServerIP</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IP address of a DNS server on the network that will allow DNS entries to be created as the administrator account.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Amazon EC2 configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint server instance type
(<code>SPServerInstanceType</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m5.xlarge</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EC2 instance type for the SharePoint servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows Server 2019 full base AMI
(<code>WS2019FULLBASE</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/aws/service/ami-windows-latest/Windows_Server-2019-English-Full-Base</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows Server 2019 full base AMI.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint server NetBIOS Name
(<code>SPServerNetBIOSNamePrefix</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SPServer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NetBIOS name prefix of the SharePoint servers (up to 14 characters).</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Microsoft Active Directory configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain DNS name
(<code>DomainDNSName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>example.com</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fully qualified domain name (FQDN) of the domain to join.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain NetBIOS name
(<code>DomainNetBIOSName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>example</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NetBIOS name of the domain to join.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administrator user name
(<code>ADAdminUserName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user name of an account with rights to the domain, without the domain name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administrator password
(<code>ADAdminPassword</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password of the Active Directory administrator account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security group ID
(<code>ADMemberSecurityGroup</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the security group that will allow access to the domain controllers for domain join and other actions.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Microsoft SQL Server configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security group ID
(<code>SQLServerAccessSecurityGroup</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the security group that will allow communication with the server or servers running SQL Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database server name
(<code>SPDatabaseName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the server running SQL Server that will store the SharePoint databases.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQL Server administrator user name
(<code>SQLAdminUserName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user name of an account with rights to the server running SQL Server, without the domain name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQL Server administrator password
(<code>SQLAdminPassword</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password of the SQL Server administrator account.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Microsoft SharePoint configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint binary bucket
(<code>SPBinaryBucket</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the S3 bucket that contains your SharePoint binaries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint binary bucket Region
(<code>SPBinaryBucketRegion</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>us-east-1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Region in which the SharePoint binary S3 bucket is hosted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint binary key
(<code>SPBinaryKey</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path (key) to the installer .zip file in the S3 bucket.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint product key
(<code>SPProductKey</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M692G-8N2JP-GG8B2-2W2P7-YY7J6</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The product key to use with SharePoint. The default key is for SharePoint 2019 Enterprise Trial.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administrator account domain
(<code>DNSPrefixCentralAdmin</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spadmin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The domain name for the central administrator account, without the domain suffix. (Use 'admin' not 'admin.domain.com'.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint domain
(<code>DNSPrefixMainSite</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sharepoint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The domain name for the main SharePoint site, without the domain suffix. (Use 'site' not 'site.domain.com'.)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_parameters_for_deploying_a_sharepoint_farm_into_a_new_vpc">Parameters for deploying a SharePoint farm into a new VPC</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Network configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key pair name
(<code>KeyPairName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Public/private key pair that allows you to securely connect to your instance after it launches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Availability Zones
(<code>AvailabilityZones</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Availability Zones to use for the subnets in the VPC. Only two Availability Zones are used for this deployment, and the logical order is preserved.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Private subnet 1 CIDR
(<code>PrivateSubnet1CIDR</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.0/19</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIDR block for the Active Directory Server tier, located in Availability Zone 1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Private subnet 2 CIDR
(<code>PrivateSubnet2CIDR</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.64.0/19</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIDR block for the Active Directory Server tier, located in Availability Zone 2.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Public subnet 1 CIDR
(<code>PublicSubnet1CIDR</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.32.0/20</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIDR block for the public (DMZ) subnet, located in Availability Zone 1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Public subnet 2 CIDR
(<code>PublicSubnet2CIDR</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.96.0/20</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIDR block for the public (DMZ) subnet, located in Availability Zone 2.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VPC CIDR
(<code>VPCCIDR</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.0/16</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIDR Block for the VPC.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Microsoft SharePoint configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint binary bucket
(<code>SPBinaryBucket</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO_DESCRIPTION</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint binary bucket Region
(<code>SPBinaryBucketRegion</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>us-east-1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Region in which the SharePoint binary S3 bucket is hosted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint binary key
(<code>SPBinaryKey</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO_DESCRIPTION</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint product key
(<code>SPProductKey</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M692G-8N2JP-GG8B2-2W2P7-YY7J6</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The product key to use with SharePoint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Farm
(<code>Farm</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Deploy a SharePoint farm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Choose whether you want to deploy a SharePoint farm or a single SharePoint server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint Server NetBIOS name
(<code>SPServerNetBIOSName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SPServer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NetBIOS name (single-server deployment) or name prefix (farm deployment) of the SharePoint server or servers (up to 14 characters).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS name central admin
(<code>DNSPrefixCentralAdmin</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spadmin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The domain name to use for central administrator, without the domain suffix. (Use 'admin' not 'admin.domain.com'.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS name main site
(<code>DNSPrefixMainSite</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sharepoint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The domain name to use for the main SharePoint site, without the domain suffix. (Use 'site' not 'site.domain.com'.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS server IP address
(<code>DNSServerIP</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IP address of a DNS server on the network that will allow DNS entries to be created as the administrator account.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Microsoft Active Directory configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain controller 1 instance type
(<code>ADServer1InstanceType</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m5.xlarge</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EC2 instance type for the first Active Directory instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain controller 1 NetBIOS name
(<code>ADServer1NetBIOSName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DC1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NetBIOS name of the first Active Directory server (up to 15 characters).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain controller 1 private IP address
(<code>ADServer1PrivateIP</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed private IP address for the first Active Directory server located in Availability Zone 1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain controller 2 instance type
(<code>ADServer2InstanceType</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m5.xlarge</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon EC2 instance type for the second Active Directory instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain controller 2 NetBIOS name
(<code>ADServer2NetBIOSName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DC2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NetBIOS name of the second Active Directory server (up to 15 characters).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain controller 2 private IP address
(<code>ADServer2PrivateIP</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.64.10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed private IP address for the second Active Directory server located in Availability Zone 2.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain administrator user name
(<code>DomainAdminUser</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>StackAdmin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name for the account that will be added as domain administrator. (This is separate from the default administrator account.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain administrator password
(<code>DomainAdminPassword</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for the domain administrator user. Must be at least 8 characters and contain letters, numbers, and symbols.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain DNS name
(<code>DomainDNSName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>example.com</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fully qualified domain name (FQDN) of the forest root domain.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain NetBIOS name
(<code>DomainNetBIOSName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>example</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NetBIOS name of the domain (up to 15 characters) for users of earlier versions of Windows.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Microsoft SQL Server configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version
(<code>SQLServerVersion</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2017</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of SQL Server to install on WSFC nodes. Choose 2016 or 2017.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service account name
(<code>SQLServiceAccount</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sqlsa</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name for the SQL Server service account. This account is a domain user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service account password
(<code>SQLServiceAccountPassword</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for the SQL Server service account. Must be at least 8 characters and contain letters, numbers, and symbols.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon-provided SQL Server license
(<code>SQLLicenseProvided</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>yes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Choose yes to license SQL Server from AWS Marketplace. Choose no to provide your own license post-deployment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data volume size
(<code>Volume1Size</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>500</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Volume size for the SQL Data drive, in GiB.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data volume type
(<code>Volume1Type</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gp2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Volume type for the SQL Data drive.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data volume IOPS
(<code>Volume1Iops</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IOPS for the SQL Data drive. (Use only when volume type is io1.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logs volume size
(<code>Volume2Size</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>500</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Volume size for the SQL Logs drive, in GiB.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logs volume type
(<code>Volume2Type</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gp2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Volume type for the SQL Logs drive.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logs volume IOPS
(<code>Volume2Iops</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IOPS for the SQL Logs drive. (Use only when volume type is io1.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TempDB volume size
(<code>Volume3Size</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>500</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Volume size for the SQL TempDB drive, in GiB.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TempDB volume type
(<code>Volume3Type</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gp2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Volume type for the SQL TempDB drive.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TempDB volume IOPS
(<code>Volume3Iops</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IOPS for the SQL TempDB drive. (Only used when volume type is io1.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Availability group name
(<code>AvailabiltyGroupName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SQLAG1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NetBIOS name of the SQL database or availability group. (Up to 15 characters.)</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. WSFC configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">File server instance type
(<code>WSFCFileServerInstanceType</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m5.large</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon EC2 instance type for a file server for witness and replication folders.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">File server private IP address
(<code>WSFCFileServerPrivateIP</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.200</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary private IP for the file server located in Availability Zone 1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WSFC node 1 instance type
(<code>WSFCNode1InstanceType</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r5.xlarge</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon EC2 instance type for the first WSFC node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WSFC node 1 NetBIOS name
(<code>WSFCNode1NetBIOSName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WSFCNode1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NetBIOS name of the first WSFC node (up to 15 characters).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WSFC node 1 private IP address 1
(<code>WSFCNode1PrivateIP1</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.100</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary private IP address for the first WSFC node, located in Availability Zone 1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WSFC node 1 private IP address 2
(<code>WSFCNode1PrivateIP2</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.101</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Secondary private IP address for the WSFC cluster, on the first WSFC node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WSFC node 1 private IP address 3
(<code>WSFCNode1PrivateIP3</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.102</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Third private IP address for the availability group listener, on the first WSFC node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WSFC node 2 instance type
(<code>WSFCNode2InstanceType</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r5.xlarge</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon EC2 instance type for the second WSFC node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WSFC node 2 NetBIOS name
(<code>WSFCNode2NetBIOSName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WSFCNode2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NetBIOS name of the second WSFC node. (Up to 15 characters.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WSFC node 2 private IP address 1
(<code>WSFCNode2PrivateIP1</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.64.100</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary private IP address for the second WSFC node located in Availability Zone 2.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WSFC node 2 private IP address 2
(<code>WSFCNode2PrivateIP2</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.64.101</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Secondary private IP address for the WSFC cluster on the second WSFC node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WSFC Node 2 private IP address 3
(<code>WSFCNode2PrivateIP3</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.64.102</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Third private IP for the availability group listener on the second WSFC node.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Microsoft Remote Desktop Gateway configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of RD Gateway hosts
(<code>NumberOfRDGWHosts</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of RD Gateway hosts to create (up to four).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allowed RD Gateway external access CIDR
(<code>RDGWCIDR</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allowed CIDR block for external access to the RD Gateway hosts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RD Gateway server instance type
(<code>RDGWInstanceType</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m5.xlarge</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EC2 instance type for the RD Gateway instance.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. AWS Quick Start configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quick Start S3 bucket name
(<code>QSS3BucketName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aws-quickstart</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon S3 bucket name for the Quick Start assets. Quick Start bucket name can include numbers, lowercase letters, uppercase letters, and hyphens (-). It cannot start or end with a hyphen (-).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quick Start S3 bucket Region
(<code>QSS3BucketRegion</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>us-east-1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The AWS Region where the Quick Start S3 bucket (QSS3BucketName) is hosted. When using your own bucket, you must specify this value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quick Start S3 key prefix
(<code>QSS3KeyPrefix</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>quickstart-microsoft-sharepoint/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S3 key prefix for the Quick Start assets. Quick Start key prefix can include numbers, lowercase letters, uppercase letters, hyphens (-), and forward slash (/).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_parameters_for_deploying_a_single_sharepoint_server_into_an_existing_vpc">Parameters for deploying a single SharePoint server into an existing VPC</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Network configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key-pair name
(<code>KeyPairName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Public/private key pairs allow you to securely connect to your instance after it launches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VPC ID
(<code>VPCID</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the VPC (e.g., vpc-0343606e).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VPC CIDR
(<code>VPCCIDR</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.0/16</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIDR block for the VPC.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the subnet
(<code>SubnetID</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the private subnet into which SharePoint will be deployed (e.g., subnet-a0246dcd).</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Amazon EC2 configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint server instance type
(<code>SPServerInstanceType</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m5.xlarge</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon EC2 instance type for the SharePoint server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows Server 2019 full base AMI
(<code>WS2019FULLBASE</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/aws/service/ami-windows-latest/Windows_Server-2019-English-Full-Base</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Amazon-provided AMI for Windows Server 2019. If you want to use a different AMI, specify the AWS Systems Manager Parameter Store parameter namespace that provides your AMI ID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint server NetBIOS name
(<code>SPServerNetBIOSName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SPServer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NetBIOS name of the SharePoint server (up to 15 characters).</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. Microsoft Active Directory configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain DNS name
(<code>DomainDNSName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>example.com</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fully qualified domain name (FQDN) of the domain to join.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain NetBIOS name
(<code>DomainNetBIOSName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>example</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NetBIOS name of the domain to join for users of earlier versions of Windows. (Up to 15 characters.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administrator user name
(<code>ADAdminUserName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user name of an account with rights to the domain, without the domain name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administrator password
(<code>ADAdminPassword</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password of the Active Directory administrator account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security group ID
(<code>ADMemberSecurityGroup</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the security group that will allow access to the domain controllers for domain join and other actions.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Microsoft SQL Server configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security group ID
(<code>SQLServerAccessSecurityGroup</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the security group that will allow communication with the server (or servers) running SQL Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database server name
(<code>SPDatabaseName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the server running SQL Server that will store the SharePoint databases.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQL Server administrator user name
(<code>SQLAdminUserName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user name of an account with rights to the server running SQL Server, without the domain name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQL Server administrator password
(<code>SQLAdminPassword</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password of the SQL Server administrator account.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. Microsoft SharePoint configuration</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 11%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter label (name)</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint binary bucket
(<code>SPBinaryBucket</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the S3 bucket that contains your SharePoint binaries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint binary bucket Region
(<code>SPBinaryBucketRegion</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>us-east-1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Region in which the SharePoint binary S3 bucket is hosted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint binary key
(<code>SPBinaryKey</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong><em>Requires input</em></strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path (key) to the installer .zip file in the S3 bucket.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SharePoint product key
(<code>SPProductKey</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M692G-8N2JP-GG8B2-2W2P7-YY7J6</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The product key to use with SharePoint. The default key is for SharePoint 2019 Enterprise trial.</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>On the options page, you can <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html" target="_blank" rel="noopener">specify tags</a> (key-value pairs) for resources in your stack and <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-console-add-tags.html" target="_blank" rel="noopener">set advanced options</a>. When you’re done, choose <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Review</strong> page, review and confirm the template settings. Under <strong>Capabilities</strong>, select the two check boxes to acknowledge that the template creates IAM resources and might require the ability to automatically expand macros.</p>
</li>
<li>
<p>Choose <strong>Create stack</strong> to deploy the stack.</p>
</li>
<li>
<p>Monitor the status of the stack. When the status is <strong>CREATE_COMPLETE</strong>, the SharePoint deployment is ready.</p>
</li>
<li>
<p>Use the values displayed in the <strong>Outputs</strong> tab for the stack, as shown in <a href="#cfn_outputs">Figure 5</a>, to view the created resources.</p>
</li>
</ol>
</div>
<div id="cfn_outputs" class="imageblock">
<div class="content">
<a class="image" href="images/cfn_outputs.png"><img src="images/cfn_outputs.png" alt="cfn_outputs" width="648" height="439"></a>
</div>
<div class="title">Figure 5. SharePoint outputs after successful deployment</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_post_deployment_steps">Post-deployment steps</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_create_initial_content">Create initial content</h3>
<div class="paragraph">
<p>This step assumes that you deployed a SharePoint farm rather than a single server, and that the server name prefix value was SPServer. In this scenario, we’ll assume that the SharePoint farm is hosting an internal site, and we’ll set up a modern team site to validate our test.</p>
</div>
<div class="paragraph">
<p>After you have successfully launched the stack, create an RDP connection into the environment through one of the RD Gateway instances. You can retrieve the Elastic IP address for each RD Gateway instance from the Amazon EC2 console.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Establish an RDP session to the primary SharePoint server (SPServer1 if you deployed a SharePoint farm with the default parameters, or SP if you deployed a single SharePoint server with the default parameters). From the start menu, select <strong>SharePoint 2019 Central Administration</strong>. When prompted to run this as an administrator, choose <strong>OK</strong> for this prompt. A web browser will open to <a href="http://spadmin.example.com" class="bare">http://spadmin.example.com</a>. When prompted for credentials, use the domain administrator user name and password.</p>
</li>
<li>
<p>On the central administration home page, choose <strong>Create site collections</strong>.</p>
</li>
</ol>
</div>
<div id="PostDeploy1" class="imageblock">
<div class="content">
<a class="image" href="images/image17.png"><img src="images/image17.png" alt="PostDeploy1" width="283" height="151"></a>
</div>
<div class="title">Figure 6. Creating site collections</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Provide a <strong>Title</strong> for your site, and then choose the <strong>Collaboration</strong> tab and select the <strong>team site</strong> template.</p>
</li>
</ol>
</div>
<div id="PostDeploy2" class="imageblock">
<div class="content">
<a class="image" href="images/image18.png"><img src="images/image18.png" alt="PostDeploy2" width="648" height="562"></a>
</div>
<div class="title">Figure 7. Creating a team site</div>
</div>
<div class="paragraph">
<p>You will also need to define a <strong>Primary Site Collection Administrator</strong> on this page. You can use the domain administrator account for this value, or any other valid user in the domain. When you finish filling out the form, choose <strong>OK</strong>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Now that you have created a team site, navigate to <a href="http://sharepoint.example.com" class="bare">http://sharepoint.example.com</a>. When prompted for credentials, enter those of the user you selected as the site collection administrator in the step above. If the site loads, your SharePoint server is now ready for use.</p>
</li>
</ol>
</div>
<div id="PostDeploy3" class="imageblock">
<div class="content">
<a class="image" href="images/image19.png"><img src="images/image19.png" alt="PostDeploy3" width="648" height="455"></a>
</div>
<div class="title">Figure 8. Team site</div>
</div>
</div>
<div class="sect2">
<h3 id="_make_the_sharepoint_databases_highly_available">Make the SharePoint databases highly available</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This step is not required if deploying a SharePoint farm into a new VPC.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="enable-full-recovery-mode">Enable full recovery mode</h4>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Establish an RDP session to the WSFCNODE1 instance. Start SQL Server Management Studio, and then choose <strong>Connect</strong> to connect to the local server.</p>
</li>
</ol>
</div>
<div id="PostDeploy4" class="imageblock">
<div class="content">
<a class="image" href="images/image7.png"><img src="images/image7.png" alt="PostDeploy4" width="477" height="315"></a>
</div>
<div class="title">Figure 9. Connecting to WSFCNODE1</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>For the four Search databases, and the Usage database, you will need to enable Full Recovery mode before you can add them to the availability group. In <strong>Object Explorer</strong>, expand the <strong>Databases</strong> node.</p>
</li>
<li>
<p>For each database, choose the context (right-click) menu, and then choose <strong>Properties</strong>. In the <strong>Database Properties</strong> dialog box, choose the <strong>Options</strong> page, and then change <strong>Recovery Model</strong> to <strong>Full</strong>.</p>
</li>
</ol>
</div>
<div id="PostDeploy5" class="imageblock">
<div class="content">
<a class="image" href="images/image20.png"><img src="images/image20.png" alt="PostDeploy5" width="648" height="586"></a>
</div>
<div class="title">Figure 10. Setting databases to full recovery mode</div>
</div>
</div>
<div class="sect3">
<h4 id="back-up-the-databases">Back up the databases</h4>
<div class="paragraph">
<p>Next, make a backup of each SharePoint database. They will all share a common prefix that begins with the name of your AWS CloudFormation stack.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>To make a backup, choose the context (right-click) menu for the database name, choose <strong>Tasks</strong>, and then choose <strong>Back Up</strong>.</p>
</li>
</ol>
</div>
<div id="PostDeploy6" class="imageblock">
<div class="content">
<a class="image" href="images/image21.png"><img src="images/image21.png" alt="PostDeploy6" width="648" height="358"></a>
</div>
<div class="title">Figure 11. Backing up a database</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Keep the default settings, and then choose <strong>OK</strong> to perform the backup.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="add-the-databases-to-the-availability-group">Add the databases to the availability group</h4>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In <strong>Object Explorer</strong>, open the <strong>Always On High Availability</strong> folder. Then open the <strong>Availability Groups</strong> folder.</p>
</li>
<li>
<p>Choose <strong>Add Database</strong> from the availability group&#8217;s context menu.</p>
<div id="PostDeploy7" class="imageblock">
<div class="content">
<a class="image" href="images/image22.png"><img src="images/image22.png" alt="PostDeploy7" width="352" height="389"></a>
</div>
<div class="title">Figure 12. Select Add Database for the availability group</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Choose all the SharePoint databases to add to the group.</p>
</li>
<li>
<p>Choose <strong>Next</strong>.</p>
<div id="PostDeploy8" class="imageblock">
<div class="content">
<a class="image" href="images/image23.png"><img src="images/image23.png" alt="PostDeploy8" width="648" height="589"></a>
</div>
<div class="title">Figure 13. Selecting databases to include in the availability group</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Connect to WSFCNODE2 to allow the databases to be added to the availability group there.</p>
</li>
<li>
<p>Choose the <strong>Connect</strong> button.</p>
</li>
<li>
<p>Choose <strong>Next</strong>.</p>
</li>
<li>
<p>Choose <strong>Automatic seeding</strong> to tell SQL Server to automatically copy the databases to the replica.</p>
</li>
</ol>
</div>
<div id="PostDeploy9" class="imageblock">
<div class="content">
<a class="image" href="images/image24.png"><img src="images/image24.png" alt="PostDeploy9" width="648" height="352"></a>
</div>
<div class="title">Figure 14. Selecting automatic seeding to populate the secondary replicas</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Ensure that the validation checks pass.</p>
</li>
<li>
<p>Choose <strong>Next</strong>.</p>
</li>
<li>
<p>Choose <strong>Finish</strong>. The databases are now part of the availability group.</p>
</li>
</ol>
</div>
<div id="PostDeploy10" class="imageblock">
<div class="content">
<a class="image" href="images/image25.png"><img src="images/image25.png" alt="PostDeploy10" width="648" height="260"></a>
</div>
<div class="title">Figure 15. Validation checks before adding the databases to the availability group</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="provide-log-access-to-the-secondary-database-server">Provide log access to the secondary database server</h3>
<div class="paragraph">
<p>Now we need to ensure that if there is a failover event, the SharePoint service accounts have access to log in to the secondary database server.</p>
</div>
<div class="paragraph">
<p>To do this, follow the instructions on the Microsoft <a href="https://support.microsoft.com/en-us/help/918992/how-to-transfer-logins-and-passwords-between-instances-of-sql-server">How to transfer logins and passwords between instances of SQL Server</a> support page. When you run the generated script against the secondary server, you might see errors for accounts that already exist. This is normal. The script will, however, add the user logins that do not already exist on the secondary server. If you add additional server accounts or users at a later stage, be sure to run this script again to add them to the secondary server.</p>
</div>
</div>
<div class="sect2">
<h3 id="_enable_multiple_subnet_failover">Enable multiple-subnet failover</h3>
<div class="paragraph">
<p>Since the SharePoint databases are replicated across subnets, the last step is to tell SharePoint that multiple-subnet failover is required. To enable multiple-subnet failover for the SharePoint databases, on the <strong>SPServer1</strong> server, run Windows PowerShell with administrative permissions and execute the following PowerShell code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Add-PSSnapin Microsoft.SharePoint.PowerShell

$dbs = Get-SPDatabase | ?\{$_.MultiSubnetFailover -ne $true}

foreach ($db in $dbs) \{

$db.MultiSubnetFailover = $true

$db.Update()

}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_test_automatic_failover">Test automatic failover</h3>
<div class="paragraph">
<p>After your externally facing SharePoint site is available, you can test automatic failover.  On the Amazon EC2 console, stop the first WSFC node, SPServer1, and SPServer3. (You can stop the instances simultaneously, as shown in <a href="#PostDeploy11">Figure 16</a>.)</p>
</div>
<div id="PostDeploy11" class="imageblock">
<div class="content">
<a class="image" href="images/image26.png"><img src="images/image26.png" alt="PostDeploy11" width="625" height="369"></a>
</div>
<div class="title">Figure 16. Stopping the instances in Availability Zone 1</div>
</div>
<div class="paragraph">
<p>The SharePoint databases should fail over automatically to the second WSFC node. The load balancers should detect that SPServer1 and SPServer3 have gone offline and should direct HTTP traffic to SPServer2 and SPServer4, respectively. You can revisit the site and the central administrator site in your web browser to confirm that everything is still working.</p>
</div>
<div class="paragraph">
<p>The primary database server should be the first WSFC node. The Network Load Balancer for the back end (central administrator site) distributes HTTP requests across SPServer1 and SPServer2. The Application Load Balancer for the front end distributes HTTP requests across SPServer3 and SPServer4.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_resources">Additional resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_appendix_a_server_role_architecture">Appendix A: Server role architecture</h3>
<div class="sect3">
<h4 id="single-server-topology">Single-server topology</h4>
<div class="paragraph">
<p>A single-server deployment of SharePoint 2019 is ideal for development environments and for small-scale testing of SharePoint where multiple servers might be excessive.</p>
</div>
<div id="PostDeploy12" class="imageblock">
<div class="content">
<a class="image" href="images/image32.png"><img src="images/image32.png" alt="PostDeploy12" width="417" height="164"></a>
</div>
<div class="title">Figure 17. A single-server SharePoint topology</div>
</div>
<div class="paragraph">
<p>In this topology, all SharePoint Service Apps and Instances will execute on the one server though, with no load balancing being required. The database server, however, runs on a different server than SharePoint. This is the simplest way to set up an environment for experimenting with SharePoint.</p>
</div>
</div>
<div class="sect3">
<h4 id="multiple-server-topology">Multiple-server topology</h4>
<div class="paragraph">
<p>When you deploy SharePoint to support a production workload that will have many users across the organization, a single-server deployment is not robust enough to account for the load or to maintain availability in the event of an incident. The multiple-server template uses four SharePoint servers in to different roles to distribute the load.</p>
</div>
<div id="PostDeploy13" class="imageblock">
<div class="content">
<a class="image" href="images/image33.png"><img src="images/image33.png" alt="PostDeploy13" width="417" height="248"></a>
</div>
<div class="title">Figure 18. An example of how multiple-server topologies in SharePoint can work</div>
</div>
<div class="paragraph">
<p>In this model, many of the back-end related activities of a SharePoint farm are handled by a second application server (or group of servers), so that the front-end servers can focus on serving end-user requests. Both sets of SharePoint servers directly communicate with the database server or Always On availability group.</p>
</div>
<div class="paragraph">
<p>To simplify the configuration of multiple-server farms, SharePoint includes the MinRole feature. MinRole provides pre-defined roles, each of which runs a group of services. This ensures that the SharePoint farm runs more smoothly and is easier to maintain.</p>
</div>
<div class="paragraph">
<p>The multiple-server topology in this Quick Start leverages the following roles in MinRole:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Front end: Front end with distributed cache</p>
</li>
<li>
<p>Application servers: Application with search</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This allows an even distribution of services while adhering to the Microsoft best practices for farm topology. For more information on what MinRole is and how it works in detail, including documentation on what services run on each of these roles, see <a href="https://docs.microsoft.com/en-us/sharepoint/install/overview-of-minrole-server-roles-in-sharepoint-server">Overview of MinRole Server Roles in SharePoint Servers 2016 and 2019</a>.</p>
</div>
<div class="paragraph">
<p>With two servers in both roles (to support high availability), the resulting architecture is shown in <a href="#PostDeploy14">Figure 19</a>&gt;&gt;.</p>
</div>
<div id="PostDeploy14" class="imageblock">
<div class="content">
<a class="image" href="images/architecture_diagram.png"><img src="images/architecture_diagram.png" alt="PostDeploy14" width="738" height="434"></a>
</div>
<div class="title">Figure 19. Multiple-server topology</div>
</div>
<div class="paragraph">
<p>To ensure the highest levels of availability, the servers are put in to different Availability Zones. This helps ensure that in an event where an entire Availability Zone becomes impaired, the servers in the second Availability Zone will still be running.</p>
</div>
<div class="sect4">
<h5 id="load-balancing">Load balancing</h5>
<div class="paragraph">
<p>The multiple-server version of the Quick Start deploys two load balancers. The first is an Application Load Balancer and is for the front-end servers, which run the main SharePoint web applications. The second is a Network Load Balancer and is for the application servers, where the central administration website runs.</p>
</div>
<div class="paragraph">
<p>The load balancers direct traffic to a healthy node in the target group. Every 30 seconds, they poll port 80 for an available connection. If a node fails three consecutive checks, the load balancer will not direct any requests to it until it is again registered as healthy.</p>
</div>
</div>
<div class="sect4">
<h5 id="database-tier">Database tier</h5>
<div class="paragraph">
<p>The database server role stores content and service data so that your SharePoint farm can utilize SQL Server in a number of ways. For small or medium-sized environments, you may be able to place all your databases on a single server. For larger-sized farms, you can spread your databases across multiple SQL Server instances or clusters of SQL Server instances. We recommend using SQL Server Enterprise in your SharePoint deployment, as it meets the performance, high availability, and reliability requirements for an enterprise application.</p>
</div>
<div class="paragraph">
<p>Amazon Machine Images (AMIs) for SQL Server Express, SQL Server Web Edition, and SQL Server Standard are available for launch on AWS. To install SQL Server 2016 or 2017 Enterprise Edition on AWS, you can use <a href="http://aws.amazon.com/windows/mslicensemobility/">Microsoft License Mobility through Software Assurance</a> to bring your own license into the cloud.</p>
</div>
<div class="paragraph">
<p>In the <a href="https://fwd.aws/GRNKR">Quick Start for Microsoft WSFC and SQL Server Always On on AWS</a>, we provide an example of how you can deploy an Always On availability group to provide high availability for your databases. Our default SQL Server configuration uses the r4.2xlarge instance type, which is a memory-optimized instance with 8 virtual CPUs (vCPUs), 61 GiB of memory, and 1 x 100 GiB of SSD instance storage. Additionally, we provide highly performing and durable storage in the form of Amazon Elastic Block Store (Amazon EBS) volumes.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="intranet-sharepoint-server-farm-on-aws">Intranet SharePoint server farm on AWS</h4>
<div class="paragraph">
<p>The architecture diagrams shown up to this point represent an isolated Microsoft SharePoint farm. For this scenario, users who are in the domain and network where SharePoint is running can access the content, but it is closed off to anyone outside of that domain and network. To allow access for a corporate network, the architecture needs to also include private connectivity from the on-premises environment. <a href="#PostDeploy15">Figure 20</a> shows a typical topology for an intranet SharePoint server farm running on the AWS Cloud.</p>
</div>
<div id="PostDeploy15" class="imageblock">
<div class="content">
<a class="image" href="images/image35.png"><img src="images/image35.png" alt="PostDeploy15" width="743" height="434"></a>
</div>
<div class="title">Figure 20. Intranet SharePoint server farm topology</div>
</div>
<div class="paragraph">
<p>In <a href="#PostDeploy15">Figure 20</a>, we’ve created a VPN tunnel from the customer gateway to the VPN gateway running in the VPC (to enable internal network connectivity to the VPC). The customer gateway is an Internet Protocol Security (IPsec)-capable device.</p>
</div>
<div class="paragraph">
<p>In addition, AWS offers the AWS Direct Connect service, which allows you to create a direct network connection from your data center into the AWS Cloud. In either case, once you have internal network connectivity into the VPC from your on-premises environment, you can simply provision internal Elastic Load Balancing to spread incoming traffic to front-end servers across each Availability Zone. Elastic Load Balancing will also provide high availability in the event of a server failure. If a web front-end server is unavailable, requests will be sent to one that is online.</p>
</div>
</div>
<div class="sect3">
<h4 id="security">Security</h4>
<div class="paragraph">
<p>As with any enterprise application deployment, a Microsoft SharePoint Server farm on AWS should implement strict security controls. AWS provides a comprehensive set of security features that allow you to control the flow of traffic through your VPC, associated subnets, and ultimately to each Amazon EC2 instance. These features allow you to reduce the attack surface of your environment while providing both end-user access to SharePoint content and applications, and administrator access for securely managing the Windows Server infrastructure. These security features and approaches are covered in this section.</p>
</div>
<div class="sect4">
<h5 id="security-groups">Security groups</h5>
<div class="paragraph">
<p>When launched, Amazon EC2 instances must be associated with at least one security group, which acts as a stateful firewall. You have complete control over the network traffic entering or leaving your security groups, and you can build granular rules that are scoped by protocol, port number, and source/destination IP address or subnet. By default, all traffic egressing a security group is permitted. Ingress traffic, on the other hand, must be configured to allow the appropriate traffic to reach your instances.</p>
</div>
<div class="paragraph">
<p>The <a href="https://d0.awsstatic.com/whitepapers/aws-microsoft-platform-security.pdf">Securing the Microsoft Platform on Amazon Web Services</a> whitepaper discusses the different methods for securing your AWS infrastructure in detail. Recommendations include providing isolation between application tiers using security groups. We recommend that you tightly control ingress traffic in order to reduce the attack surface of your Amazon EC2 instances.</p>
</div>
</div>
<div class="sect4">
<h5 id="network-acls">Network ACLs</h5>
<div class="paragraph">
<p>A network access control list (ACL) is a set of permissions that can be attached to any network subnet in a VPC to provide stateless filtering of traffic. Network ACLs can be used for inbound or outbound traffic, and provide an effective way to blacklist a CIDR block or individual IP addresses. These ACLs can contain ordered rules to allow or deny traffic based upon IP protocol, service port, or source or destination IP address. Figure 21 shows the default ACL configuration for a VPC subnet.</p>
</div>
<div id="PostDeploy16" class="imageblock">
<div class="content">
<a class="image" href="images/image36.png"><img src="images/image36.png" alt="PostDeploy16" width="597" height="281"></a>
</div>
<div class="title">Figure 21. Default network ACL configuration for a VPC subnet</div>
</div>
<div class="paragraph">
<p>You can keep the default network ACL configuration or add more specific rules to restrict traffic between subnets at the network level. Typically, network ACLs will mirror your security group rules. One benefit of multiple layers of network security (security groups and network ACLs) is that each layer can be managed by a separate group in your organization. If a server administrator inadvertently exposes unnecessary network ports on a security group, a network administrator could supersede this configuration by blocking that traffic at the network ACL layer.</p>
</div>
</div>
<div class="sect4">
<h5 id="secure-extranet-publishing">Secure extranet publishing</h5>
<div class="paragraph">
<p>Some organizations may use SharePoint Server to host a publicly accessible extranet. In this scenario, you can add another layer of security by placing reverse proxy servers into your public subnet to provide additional security and threat management. In this configuration, the public subnet acts like the DMZ that you would typically use in a physical network environment. Web page requests from internet-based users would be sent to these reverse proxy servers, which would then establish a connection to your web front-end servers that are running in a private subnet.</p>
</div>
<div class="paragraph">
<p><a href="#PostDeploy17">Figure 22</a> shows an example of publishing SharePoint web front-end servers, located in a private subnet, through a reverse proxy server deployed into a public subnet.</p>
</div>
<div id="PostDeploy17" class="imageblock">
<div class="content">
<a class="image" href="images/image37.png"><img src="images/image37.png" alt="PostDeploy17" width="648" height="389"></a>
</div>
<div class="title">Figure 22. Web application publishing with a reverse proxy server</div>
</div>
<div class="paragraph">
<p>A benefit of this architecture is that it provides the ability to pre-authenticate users at the perimeter of your network while shielding your internal SharePoint servers from the public internet. Several third-party appliances and applications can be used for this task. Microsoft’s Web Application Proxy role in Windows Server 2019 also provides support for publishing your SharePoint resources to the internet.</p>
</div>
<div class="paragraph">
<p>The AWS CloudFormation template provided by this Quick Start does not set up an environment for extranet publishing, but after the deployment, you may choose to add reverse proxy servers and configure the environment that’s illustrated in <a href="#PostDeploy17">Figure 22</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ec2-instance-types">EC2 instance types</h4>
<div class="paragraph">
<p>Properly planning for capacity and sizing servers is a key aspect of every enterprise application deployment. As such, it is important that you choose the appropriate Amazon EC2 instance type for each server role in your SharePoint deployment. Since each deployment is different, you will need to follow Microsoft’s detailed guidance on how to properly size your environment based on the number of users and workloads involved. As a starting point, consider the minimum requirements for each server role.</p>
</div>
<div class="paragraph">
<p>The following values are based on minimum requirements for all server roles operating in a three-tier farm.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Role</th>
<th class="tableblock halign-left valign-top">Processor</th>
<th class="tableblock halign-left valign-top">RAM</th>
<th class="tableblock halign-left valign-top">Boot volume</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web front-end server / front-end server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit, 4 cores</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12 GiB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80 GiB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application server / batch processing / back end</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit, 4 cores</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12 GiB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80 GiB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database server (fewer than 1,000 users)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit, 4 cores</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8 GiB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80 GiB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database server (between 1,000 and 10,000 users)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit, 8 cores</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 GiB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80 GiB</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Quick Start uses the following instance types by default. These provide additional capacity over the absolute minimum requirements as a starting point.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Role</th>
<th class="tableblock halign-left valign-top">EC2 instance type</th>
<th class="tableblock halign-left valign-top">Boot volume</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web front-end server / front-end server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">m4.xlarge (4 vCPU, 16 GiB memory)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100 GiB (EBS/GP2)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application server / batch processing / back end</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">m4.xlarge (4 vCPU, 16 GiB memory)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100 GiB (EBS/GP2)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">r4.2xlarge (8 vCPU, 61 GiB memory)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100 GiB (EBS/GP2)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Amazon EBS volumes are used as the boot volume for each instance. Notice that we use the EBS General Purpose (gp2) volume type. This is an SSD-backed EBS volume that is used as the default boot volume type for all EC2 instances. These gp2 volumes provide a consistent baseline of 3 IOPS/GiB and are burstable up to 3,000 IOPS.</p>
</div>
<div class="paragraph">
<p>When you launch the AWS CloudFormation template in this guide, you’ll be given the opportunity to adjust these instance types.<a id="_Customize_Your_Topology"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_aws_services">AWS services</h3>
<div class="ulist">
<ul>
<li>
<p>AWS CloudFormation<br>
<a href="https://aws.amazon.com/documentation/cloudformation/" class="bare">https://aws.amazon.com/documentation/cloudformation/</a></p>
</li>
<li>
<p>Amazon EC2<br>
<a href="https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/" class="bare">https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/</a></p>
</li>
<li>
<p>Amazon VPC<br>
<a href="https://aws.amazon.com/documentation/vpc/" class="bare">https://aws.amazon.com/documentation/vpc/</a></p>
</li>
<li>
<p>AWS Systems Manager<br>
<a href="https://aws.amazon.com/systems-manager/" class="bare">https://aws.amazon.com/systems-manager/</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Microsoft SharePoint Server</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configure SQL Server AlwaysOn Availability Groups for SharePoint Server<br>
<a href="https://docs.microsoft.com/en-us/sharepoint/administration/configure-an-alwayson-availability-group" class="bare">https://docs.microsoft.com/en-us/sharepoint/administration/configure-an-alwayson-availability-group</a></p>
</li>
<li>
<p>Failover Clustering and Always On Availability Groups (SQL Server)<br>
<a href="https://docs.microsoft.com/en-us/sql/database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server?view=sql-server-2017" class="bare">https://docs.microsoft.com/en-us/sql/database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server?view=sql-server-2017</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Deploying Microsoft software on AWS</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Microsoft on AWS<br>
<a href="https://aws.amazon.com/microsoft/" class="bare">https://aws.amazon.com/microsoft/</a></p>
</li>
<li>
<p>Securing the Microsoft Platform on Amazon Web Services<br>
<a href="https://d1.awsstatic.com/whitepapers/aws-microsoft-platform-security.pdf" class="bare">https://d1.awsstatic.com/whitepapers/aws-microsoft-platform-security.pdf</a></p>
</li>
<li>
<p>Microsoft Licensing Mobility<br>
<a href="https://aws.amazon.com/windows/mslicensemobility/" class="bare">https://aws.amazon.com/windows/mslicensemobility/</a></p>
</li>
<li>
<p>MSDN on AWS<br>
<a href="https://aws.amazon.com/windows/msdn/" class="bare">https://aws.amazon.com/windows/msdn/</a></p>
</li>
<li>
<p>Windows and .NET Developer Center on AWS<br>
<a href="https://aws.amazon.com/net/" class="bare">https://aws.amazon.com/net/</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Quick Start reference deployments</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>AWS Quick Start home page<br>
<a href="https://aws.amazon.com/quickstart/" class="bare">https://aws.amazon.com/quickstart/</a></p>
</li>
<li>
<p>Microsoft Active Directory on AWS<br>
<a href="https://docs.aws.amazon.com/quickstart/latest/active-directory-ds/" class="bare">https://docs.aws.amazon.com/quickstart/latest/active-directory-ds/</a></p>
</li>
<li>
<p>Microsoft Remote Desktop Gateway on AWS<br>
<a href="https://docs.aws.amazon.com/quickstart/latest/rd-gateway/" class="bare">https://docs.aws.amazon.com/quickstart/latest/rd-gateway/</a></p>
</li>
<li>
<p>Microsoft SQL Server with WSFC on AWS<br>
<a href="https://docs.aws.amazon.com/quickstart/latest/sql/" class="bare">https://docs.aws.amazon.com/quickstart/latest/sql/</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_faq">FAQ</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Q.</strong> I encountered a <strong>CREATE_FAILED</strong> error when I launched the Quick Start.</p>
</div>
<div class="paragraph">
<p><strong>A.</strong> If AWS CloudFormation fails to create the stack, we recommend that you relaunch the template with <strong>Rollback on failure</strong> set to <strong>Disabled</strong>. (This setting is under <strong>Advanced</strong> in the AWS CloudFormation console, <strong>Options</strong> page.) With this setting, the stack’s state is retained and the instance is left running, so you can troubleshoot the issue. (For Windows, look at the log files in %ProgramFiles%\Amazon\EC2ConfigService and C:\cfn\log.)</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When you set <strong>Rollback on failure</strong> to <strong>Disabled</strong>, you continue to incur AWS charges for this stack. Delete the stack when you finish troubleshooting.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following table lists specific CREATE_FAILED error messages you might encounter while creating the stack in AWS CloudFormation.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Error message</th>
<th class="tableblock halign-left valign-top">Possible cause</th>
<th class="tableblock halign-left valign-top">What to do</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API: ec2: RunInstances Not authorized for images: [ami-&lt;ID&gt;]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The template is referencing an AMI that has expired.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>We refresh AMIs on a regular basis, but our schedule isn’t always synchronized with AWS AMI updates. If you get this error message, notify us, and we’ll update the template with the new AMI ID.</p>
</div>
<div class="paragraph">
<p>If you’d like to fix the template yourself, you can <a href="https://fwd.aws/87Dgp">download it</a> and update the Mappings section with the latest AMI ID for your Region.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">We currently do not have sufficient &lt;instance type&gt; capacity in the AZ you requested</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of the instance types is currently not available.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Switch to an instance type that supports higher capacity, or complete the <strong>Request quota increase</strong> form on the <a href="https://console.aws.amazon.com/servicequotas/home?region=us-east-1#!/">Service Quotas</a> console to increase the Amazon EC2 quota for the instance type or Region. Quota increases are tied to the Region they were requested for.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instance &lt;ID&gt; did not stabilize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You have exceeded your IOPS for the Region.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://aws.amazon.com/support/createCase?serviceLimitIncreaseType=ebs-volumes&amp;type=service_limit_increase">Request a quota increase</a> by completing the <strong>Request quota increase</strong> form on <a href="https://console.aws.amazon.com/servicequotas/home?region=us-east-1#!/">Service Quotas</a> console.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">System Administrator password must contain at least 8 characters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The master password contains $ or other special characters.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Check the password parameters before you re-launch the Quick Start.</p>
</div>
<div class="paragraph">
<p>The passwords must be at least 8 characters, consisting of uppercase and lowercase letters and numbers. Follow the <a href="https://technet.microsoft.com/en-us/library/hh994562.aspx">guidelines for complex passwords</a>, and avoid using special characters such as @ or $.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Q.</strong> I encountered a size limitation error when I deployed the AWS CloudFormation templates.</p>
</div>
<div class="paragraph">
<p><strong>A.</strong> We recommend that you launch the Quick Start templates from the links in this guide or from another Amazon S3 bucket. If you deploy the templates from a local copy on your computer or from a location other than an Amazon S3 bucket, you might encounter template size limitations. For more information, see <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cloudformation-limits.html" target="_blank" rel="noopener">AWS CloudFormation quotas</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For additional information, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html" target="_blank" rel="noopener">Troubleshooting AWS CloudFormation</a> on the AWS website.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_troubleshooting">Troubleshooting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If wait condition or resource signal times out, or a failure signal displays, review AWS Systems Manager State Manager to identify non-compliant resources.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the navigation pane, choose <strong>Compliance</strong>. A compliance resources summary will display.</p>
</li>
</ol>
</div>
<div id="Troubleshooting1" class="imageblock">
<div class="content">
<a class="image" href="images/image27.png"><img src="images/image27.png" alt="Troubleshooting1" width="648" height="285"></a>
</div>
<div class="title">Figure 23. Compliance view in Systems Manager</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the <strong>Compliance type</strong> column, for single-server deployments, look for <strong>Custom:QSSPSingle</strong>. For multiple-server deployments, look for <strong>Custom:QSSPFarmFarm</strong>, <strong>Custom:QSSPFarmApp</strong>, and <strong>Custom:QSSPFarmWFE</strong>.</p>
</li>
<li>
<p>If a number displays in the in the <strong>Non-Compliant resources</strong> column for one of these items, choose it. Then, scroll down the page to see a list of instances that do not meet the compliance requirement.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Non-compliant resources occur when the server could not be configured correctly.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Choose the instance you want to investigate. A new browser tab will open.</p>
</li>
<li>
<p>To see which resources on the server were not configured, do the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Choose the <strong>Configuration compliance</strong> tab on the instance detail page.</p>
</li>
<li>
<p>Choose <strong>Configuration status</strong> in the filter box.</p>
</li>
<li>
<p>Choose <strong>NonCompliant</strong>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div id="Troubleshooting2" class="imageblock">
<div class="content">
<a class="image" href="images/image28.png"><img src="images/image28.png" alt="Troubleshooting2" width="648" height="261"></a>
</div>
<div class="title">Figure 24. Filtering to show non-compliant resources</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>To find detailed logs, do the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>On the <strong>Associations</strong> tab, choose the entry with the <strong>AWS-ApplyDSCMofs</strong> document name.</p>
</li>
<li>
<p>Choose <strong>View Output</strong>. Take note of the association ID here, which is needed in the next step.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div id="Troubleshooting3" class="imageblock">
<div class="content">
<a class="image" href="images/image29.png"><img src="images/image29.png" alt="Troubleshooting3" width="648" height="160"></a>
</div>
<div class="title">Figure 25. Finding the association ID</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>On the Systems Manager console, choose <strong>State Manager</strong>.</p>
</li>
</ol>
</div>
<div id="Troubleshooting4" class="imageblock">
<div class="content">
<a class="image" href="images/image30.png"><img src="images/image30.png" alt="Troubleshooting4" width="648" height="473"></a>
</div>
<div class="title">Figure 26. Filtering to show non-compliant resources</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>In the list that is displayed, choose the association ID from step 6 to view its execution history.</p>
</li>
<li>
<p>On the <strong>Execution History</strong> tab, you can see every configuration run that has been attempted by this Automation document. (State Manager configurations run every 30 minutes.) Choose the first item in the list, and then find the instance ID that was failing in configuration.</p>
</li>
<li>
<p>Choose <strong>Output</strong>.</p>
</li>
</ol>
</div>
<div id="Troubleshooting5" class="imageblock">
<div class="content">
<a class="image" href="images/image31.png"><img src="images/image31.png" alt="Troubleshooting5" width="648" height="143"></a>
</div>
<div class="title">Figure 27. The output link for a specific execution job</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>A new browser tab will open. To view the logs, do the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Choose <strong>Amazon S3</strong></p>
</li>
<li>
<p>Choose the <strong>RunPowerShell</strong> folder</p>
</li>
<li>
<p>Open the file stdout. This file contains full output of the configuration script  including errors.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For additional information, see <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html">Troubleshooting AWS CloudFormation</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_send_us_feedback">Send us feedback</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To post feedback, submit feature ideas, or report bugs, use the <strong>Issues</strong> section of the <a href="https://github.com/aws-quickstart/quickstart-microsoft-sharepoint" target="_blank" rel="noopener">GitHub repository</a> for this Quick Start. To submit code, please review the <a href="https://aws-quickstart.github.io/" target="_blank" rel="noopener">Quick Start Contributor’s Guide</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quick_start_reference_deployments">Quick Start reference deployments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See the <a href="https://aws.amazon.com/quickstart/">AWS Quick Start home page</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_github_repository">GitHub repository</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can visit our <a href="https://github.com/aws-quickstart/quickstart-microsoft-sharepoint" target="_blank" rel="noopener">GitHub repository</a> to download
the templates and scripts for this Quick Start, to post your comments,
and to share your customizations with others.</p>
</div>
<hr>
<div class="paragraph">
<p>© 2020, Amazon Web Services Inc., or its affiliates, and {partner-company-name}. All rights reserved.</p>
</div>
<div class="sect3">
<h4 id="_notices">Notices</h4>
<div class="paragraph">
<p>This document is provided for informational purposes only. It represents AWS’s current product offerings and practices as of the date of issue of this document, which are subject to change without notice. Customers are responsible for making their own independent assessment of the information in this document and any use of AWS’s products or services, each of which is provided “as is” without warranty of any kind, whether expressed or implied. This document does not create any warranties, representations, contractual commitments, conditions, or assurances from AWS, its affiliates, suppliers, or licensors. The responsibilities and liabilities of AWS to its customers are controlled by AWS agreements, and this document is not part of, nor does it modify, any agreement between AWS and its customers.</p>
</div>
<div class="paragraph">
<p>The software included with this paper is licensed under the Apache License, version 2.0 (the "License"). You may not use this file except in compliance with the License. A copy of the License is located at <a href="http://aws.amazon.com/apache2.0/" class="bare">http://aws.amazon.com/apache2.0/</a> or in the accompanying "license" file. This code is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either expressed or implied. See the License for specific language governing permissions and limitations.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-10-27 12:21:57 -0400
</div>
</div>
</body>
</html>